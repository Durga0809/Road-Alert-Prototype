<!DOCTYPE html>
<html>
<head>
    <title>Live</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            font-family: Arial; 
            background: #0a1f44; /* Navy */
        }

        #infoPanel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            color: #0a1f44;
            padding: 20px;
            border-radius: 12px;
            width: 250px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        #infoPanel h2 {
            margin: 0 0 10px 0;
        }

        #backBtn {
            margin-top: 15px;
            padding: 10px 15px;
            background: #0a1f44;
            color: #ffffff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            transition: 0.3s;
        }

        #backBtn:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }
    </style>
</head>
<body>

<div id="infoPanel">
    <h2>AI Smart Road Alert</h2>
    <p>Status: <b style="color:green;">Active</b></p>
    <p>Blocked Area: Goripalayam</p>
    <p>Reason: Heavy Traffic</p>
    <p>Confidence: 92%</p>
    <!-- Back Button -->
    <button id="backBtn" onclick="goBack()">â¬… Back to History</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x0a1f44); // Navy

// Camera
const camera = new THREE.PerspectiveCamera(
    60, window.innerWidth/window.innerHeight, 0.1, 1000
);
camera.position.set(40, 35, 60);

// Renderer
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
document.body.appendChild(renderer.domElement);

// Lights
const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
scene.add(ambientLight);

const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
dirLight.position.set(50,50,50);
scene.add(dirLight);

// Ground (Map-style grid)
const gridHelper = new THREE.GridHelper(200, 40, 0xffffff, 0x1c3d73);
scene.add(gridHelper);

// Main Road
const roadGeo = new THREE.BoxGeometry(80, 0.5, 12);
const roadMat = new THREE.MeshPhongMaterial({color: 0x0f2a5f}); 
const road = new THREE.Mesh(roadGeo, roadMat);
road.position.y = 0.25;
scene.add(road);

// White Lane Lines
for(let i=-35;i<=35;i+=15){
    const lineGeo = new THREE.BoxGeometry(6,0.1,0.5);
    const lineMat = new THREE.MeshBasicMaterial({color: 0xffffff});
    const line = new THREE.Mesh(lineGeo,lineMat);
    line.position.set(i,0.6,0);
    scene.add(line);
}

// Car (White)
const carGeo = new THREE.BoxGeometry(4, 2, 2);
const carMat = new THREE.MeshPhongMaterial({color: 0xffffff});
const car = new THREE.Mesh(carGeo, carMat);
car.position.set(-35, 1.5, 0);
scene.add(car);

// Blocked Area (Blinking Red)
const blockGeo = new THREE.BoxGeometry(5,5,5);
const blockMat = new THREE.MeshPhongMaterial({color: 0xff0000});
const block = new THREE.Mesh(blockGeo, blockMat);
block.position.set(20,2.5,0);
scene.add(block);

// White Buildings
for(let i = 0; i < 25; i++){
    const height = Math.random()*25 + 15;
    const bGeo = new THREE.BoxGeometry(8, height, 8);
    const bMat = new THREE.MeshPhongMaterial({color: 0xffffff});
    const building = new THREE.Mesh(bGeo, bMat);
    building.position.set(
        Math.random()*150-75,
        height/2,
        Math.random()*150-75
    );
    scene.add(building);
}

// Animation
function animate() {
    requestAnimationFrame(animate);

    // Car Movement
    car.position.x += 0.4;
    if(car.position.x > 40) car.position.x = -40;

    // Block blinking
    block.material.color.set(
        Math.sin(Date.now()*0.005) > 0 ? 0xff0000 : 0x550000
    );

    // Smooth camera rotation
    camera.position.x = Math.sin(Date.now()*0.0004)*70;
    camera.position.z = Math.cos(Date.now()*0.0004)*70;
    camera.lookAt(0,0,0);

    renderer.render(scene, camera);
}

animate();

// Resize Fix
window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});

// Back Button Function
function goBack() {
    window.location.href = "history.html"; // Change to your history page path
}
</script>

</body>
</html